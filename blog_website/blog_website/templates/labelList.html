{% extends 'base.html' %}

{% block link %}
        <script src="{{ static('js/page.js') }}"></script>
{% endblock link %}

{% block article %}
    <div class="lbox">
            <div class="whitebg bloglist">
                <h2 class="htitle"><span class="hnav">
      </span>{{ label.name }}</h2>
                <ul>
                    {% for article in articles %}
                        <li>
                            <h3 class="blogtitle"><a
                                    href="{{ url('article:article_detail', args=(article.article.id,)) }}"
                                    target="_blank">{{ article.article.title }}</a></h3>
                            <span class="blogpic imgscale"><i><a
                                    href="{{ url('article:category_list', args=(article.article.category1.id, 1)) }}">{{ article.article.category2.name }}</a></i><a
                                    href="{{ url('article:article_detail', args=(article.article.id,)) }}" title=""><img
                                    src="{{ article.article.index_image }}" alt=""></a></span>
                            <p class="blogtext">{{ article.article.describe }} </p>
                            <p class="bloginfo"><i class="avatar"><img
                                    src="{{ article.article.author.avatar_url }}"></i><span>{{ article.article.author.webname }}</span><span>{{ article.article.create_time | time_filter }}</span>
                                {% for label in article.labels %}
                                    <span>【<a href="{{ url('article:label_articles', args=(label.id, 1)) }}">{{ label.name }}</a>】</span>
                                {% endfor %}
                            </p>
                            <a href="{{ url('article:article_detail', args=(article.article.id,)) }}" class="viewmore">阅读更多</a>
                        </li>
                    {% endfor %}

                </ul>
                <!--pagelist-->

                <div class="pagelist">
                    <a href="javascript:;" onclick="pretpage()">上一页</a>
                    <a title="Total record">&nbsp;<b>共{{ article_count }}篇</b> </a>&nbsp;&nbsp;&nbsp;
                    <a href="javascript:;" onclick="nextpage()">下一页</a>&nbsp;
                </div>
            </div>

            <!--bloglist end-->
        </div>
{% endblock article %}
{% block endjs %}
    <script>
    function nextpage() {
        var curpage = {{ page_num }} +1;
        var total_page = {{ total_page }};
        if (curpage > total_page) {
            alert('已经是最后一页了')
        } else {
            location.href = '/label/articles/' + {{ label.id }} +'/' + curpage + '/';
        }

    }

    function pretpage() {
        var curpage = {{ page_num }} - 1;
        var total_page = {{ total_page }};
        if (curpage == 0) {
            alert('前面没有了')
        } else {
             location.href = '/label/articles/' + {{ label.id }} +'/' + curpage + '/';
        }

    }
</script>
{% endblock endjs %}